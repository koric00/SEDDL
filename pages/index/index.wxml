<!--pages/index/index.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <view class="title">è½¯ä»¶å·¥ç¨‹ä¼šè®®æˆªæ­¢æ—¥æœŸ</view>
    <view class="subtitle">æœ€åæ›´æ–°: {{lastUpdated || 'æœªæ›´æ–°'}}</view>
  </view>
  
  <!-- åˆ†ç±»é€‰æ‹©å™¨ -->
  <view class="tier-selector">
    <view 
      wx:for="{{tiers}}" 
      wx:key="value" 
      class="tier-button {{selectedTier === item.value ? 'selected' : ''}}"
      bindtap="changeTier"
      data-tier="{{item.value}}">
      {{item.text}}
    </view>
  </view>
  
  <!-- åŠ è½½ä¸­æç¤º -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  
  <!-- é”™è¯¯æç¤º -->
  <view class="error" wx:elif="{{error}}">
    <text>{{error}}</text>
    <button bindtap="loadData" class="retry-button">é‡è¯•</button>
  </view>
  
  <!-- ä¼šè®®åˆ—è¡¨ -->
  <view class="deadlines-list" wx:else>
    <block wx:if="{{filteredDeadlines.length > 0}}">
      <view class="meeting-item" wx:for="{{filteredDeadlines}}" wx:key="id">
        <view class="meeting-info">
          <view class="meeting-header">
            <view class="meeting-name">{{item.name}}</view>
            <view class="meeting-tier tier-{{item.tier}}">{{item.tier}}ç±»</view>
          </view>
          <view class="meeting-type">{{item.type}}</view>
          <view class="meeting-deadline">{{item.deadline}}</view>
          <view class="meeting-location" wx:if="{{item.location}}">
            <text class="location-icon">ğŸ“</text>
            <text>{{item.location}}</text>
          </view>
        </view>
        <view class="meeting-actions">
          <view class="deadline-days {{item.daysLeft <= 7 ? 'urgent' : ''}}">
            è¿˜å‰© {{item.daysLeft}} å¤©
          </view>
          <view class="add-calendar-icon" bindtap="addToCalendar" data-item="{{item}}">â•</view>
        </view>
      </view>
    </block>
    <view class="no-data" wx:else>
      <text>æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä¼šè®®</text>
    </view>
  </view>
</view>
